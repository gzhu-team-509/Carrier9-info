{"config":{"lang":["en"],"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"\u4e3b\u9875 \u00b6 \u672c\u7ad9\u70b9\u4e3a\u5bdd\u5ba4\u8def\u7531\u5668\u6587\u6863\u7ad9\u70b9\u3002 \u786c\u4ef6 \u00b6 Model Version SoC CPU MHz Flash MB RAM MB WLAN Hardware WLAN2.4 WLAN5.0 100M ports Gbit ports Modem USB Y1 v1 MediaTek MT7620A 580 16 128 MediaTek MT7612E b/g/n a/n/ac 2 - No 1x 2.0 \u5904\u7406\u5668\u6838\u5fc3\u6570\u91cf 1 \u5904\u7406\u5668\u67b6\u6784 ramips mipsel \u786c\u4ef6\u8be6\u7ec6\u4fe1\u606f\u94fe\u63a5 \u8f6f\u4ef6 \u00b6 \u8def\u7531\u5668\u8fd0\u884cOpenWRT\u7cfb\u7edf\uff0c\u5e76\u5728\u6bcf\u5929\u51cc\u66684:30\u81ea\u52a8\u91cd\u542f\u3002 \u5386\u53f2 \u00b6 \u6700\u521d\uff0c\u5bdd\u5ba4\u7684\u8def\u7531\u5668\u662f\u53c2\u8003 GZHU-Dress/GZHU-Wikiii \u4ee5\u53ca GZHU-Dress/openwrt-minieap \u914d\u7f6e\u7684\uff0c\u5e76\u66fe\u7ecf\u4f7f\u7528\u8fc7\u4e00\u6bb5\u65f6\u95f4\u7684 CrazyBoyFeng/agentx1 \uff0c\u540e\u6765GZHU-Wikiii\u4e0a\u7684\u9875\u9762\u56e0\u4e3a\u8fc7\u65f6\u800c\u6216\u79fb\u9664\u6216\u5b58\u6863\u4e86\u3002 \u6b64\u540e\uff0c\u53c2\u8003 ysc3839/openwrt-minieap \u66f4\u65b0\u4e86\u8def\u7531\u5668\u4e0a\u7684\u8f6f\u4ef6\u3002 Minieap\u811a\u672c\u7684\u7f16\u5199\u53c2\u8003\u4e86 updateing/router-scripts/ \u3002","title":"\u4e3b\u9875"},{"location":"#_1","text":"\u672c\u7ad9\u70b9\u4e3a\u5bdd\u5ba4\u8def\u7531\u5668\u6587\u6863\u7ad9\u70b9\u3002","title":"\u4e3b\u9875"},{"location":"#_2","text":"Model Version SoC CPU MHz Flash MB RAM MB WLAN Hardware WLAN2.4 WLAN5.0 100M ports Gbit ports Modem USB Y1 v1 MediaTek MT7620A 580 16 128 MediaTek MT7612E b/g/n a/n/ac 2 - No 1x 2.0 \u5904\u7406\u5668\u6838\u5fc3\u6570\u91cf 1 \u5904\u7406\u5668\u67b6\u6784 ramips mipsel \u786c\u4ef6\u8be6\u7ec6\u4fe1\u606f\u94fe\u63a5","title":"\u786c\u4ef6"},{"location":"#_3","text":"\u8def\u7531\u5668\u8fd0\u884cOpenWRT\u7cfb\u7edf\uff0c\u5e76\u5728\u6bcf\u5929\u51cc\u66684:30\u81ea\u52a8\u91cd\u542f\u3002","title":"\u8f6f\u4ef6"},{"location":"#_4","text":"\u6700\u521d\uff0c\u5bdd\u5ba4\u7684\u8def\u7531\u5668\u662f\u53c2\u8003 GZHU-Dress/GZHU-Wikiii \u4ee5\u53ca GZHU-Dress/openwrt-minieap \u914d\u7f6e\u7684\uff0c\u5e76\u66fe\u7ecf\u4f7f\u7528\u8fc7\u4e00\u6bb5\u65f6\u95f4\u7684 CrazyBoyFeng/agentx1 \uff0c\u540e\u6765GZHU-Wikiii\u4e0a\u7684\u9875\u9762\u56e0\u4e3a\u8fc7\u65f6\u800c\u6216\u79fb\u9664\u6216\u5b58\u6863\u4e86\u3002 \u6b64\u540e\uff0c\u53c2\u8003 ysc3839/openwrt-minieap \u66f4\u65b0\u4e86\u8def\u7531\u5668\u4e0a\u7684\u8f6f\u4ef6\u3002 Minieap\u811a\u672c\u7684\u7f16\u5199\u53c2\u8003\u4e86 updateing/router-scripts/ \u3002","title":"\u5386\u53f2"},{"location":"DNS/","text":"DNS\u89e3\u51b3\u65b9\u6848 \u00b6 Unbound \u00b6 Unbound\u73b0\u4f7f\u7528\u975e\u52a0\u5bc6\u7684DNS\uff0c\u4e0a\u6e38\u4e3a1.1.1.1\uff0c\u5b8c\u5168\u66ff\u4ee3\u6821\u56ed\u7f51DNS\u3002 \u5b89\u88c5Unbound \u00b6 opkg install unbound opkg install unbound-control unbound-control-setup # \u8bbe\u7f6eunbound-control unbound-control-setup # \u901a\u5e38\u9700\u8981\u91cd\u542f\u540eunbound-control\u624d\u80fd\u751f\u6548\u3002 \u914d\u7f6eUnbound \u00b6 \u4f7f\u7528Luci\u754c\u9762 /cgi-bin/luci/admin/services/unbound/configure \u8fdb\u884c\u914d\u7f6e\uff0c\u4f7f\u7528Manual Conf\u548cExtended Tabs\u3002 \u82e5\u8981\u5b8c\u5168\u4ea4\u7531Unbound\u89e3\u6790\uff0c\u9700\u8981\u5728Luci\u754c\u9762 /cgi-bin/luci/admin/network/dhcp \u4e2d\u8bbe\u7f6eignore resolve file /tmp/resolv.conf.auto \u3002 \u5173\u4e8etls-upstream \u00b6 \u7531\u4e8e\u786c\u4ef6\u6761\u4ef6\u9650\u5236\u548ctls-upstream\u8fde\u63a5\u5efa\u7acb\u901f\u5ea6\u6162\u7b49\u539f\u56e0\uff0cunbound\u7684\u89e3\u6790\u901f\u5ea6\u53ef\u80fd\u4f1a\u5f88\u6162\uff0c\u56e0\u6b64\u5b9e\u8df5\u4e2d\u4e0d\u63a8\u8350\u5b8c\u5168\u7531unbound\u89e3\u6790\uff0c\u800c\u662f\u5c06unbound\u4f5c\u4e3a\u6821\u56edDNS\u7684\u5907\u7528\u670d\u52a1\u4f7f\u7528\u3002 \u8981\u5b8c\u5168\u4ea4\u7531unbound\u89e3\u6790\uff0c\u5e94\u5f53\u4f7f\u7528\u975e\u52a0\u5bc6\u7684DNS\u534f\u8bae\u3002 \u73b0\u6709 1.1.1.1 \u548c \u7ea2\u9c7cDNS \u63d0\u4f9b\u7684DoT\u3002 GoogleHosts \u00b6 \u5df2\u505c\u7528\uff0c\u7531Unbound\u66ff\u4ee3\u3002 GoogleHosts\u9879\u76ee\u4e3b\u9875\uff1a https://github.com/googlehosts/ \u4f7f\u7528\u81ea\u5b9a\u4e49Host\u65f6\uff0c\u9700\u8981\u5728Luci /cgi-bin/luci/admin/network/dhcp \u4e2d\u6307\u660eAddtional host file\u3002 Host\u4e0b\u8f7d\u811a\u672c\uff1a #!/bin/sh wget -O /etc/googlehosts https://raw.githubusercontent.com/googlehosts/hosts/master/hosts-files/hosts wget -O /etc/googlehosts6 https://raw.githubusercontent.com/googlehosts/hosts-ipv6/master/hosts-files/hosts","title":"DNS\u89e3\u51b3\u65b9\u6848"},{"location":"DNS/#dns","text":"","title":"DNS\u89e3\u51b3\u65b9\u6848"},{"location":"DNS/#unbound","text":"Unbound\u73b0\u4f7f\u7528\u975e\u52a0\u5bc6\u7684DNS\uff0c\u4e0a\u6e38\u4e3a1.1.1.1\uff0c\u5b8c\u5168\u66ff\u4ee3\u6821\u56ed\u7f51DNS\u3002","title":"Unbound"},{"location":"DNS/#unbound_1","text":"opkg install unbound opkg install unbound-control unbound-control-setup # \u8bbe\u7f6eunbound-control unbound-control-setup # \u901a\u5e38\u9700\u8981\u91cd\u542f\u540eunbound-control\u624d\u80fd\u751f\u6548\u3002","title":"\u5b89\u88c5Unbound"},{"location":"DNS/#unbound_2","text":"\u4f7f\u7528Luci\u754c\u9762 /cgi-bin/luci/admin/services/unbound/configure \u8fdb\u884c\u914d\u7f6e\uff0c\u4f7f\u7528Manual Conf\u548cExtended Tabs\u3002 \u82e5\u8981\u5b8c\u5168\u4ea4\u7531Unbound\u89e3\u6790\uff0c\u9700\u8981\u5728Luci\u754c\u9762 /cgi-bin/luci/admin/network/dhcp \u4e2d\u8bbe\u7f6eignore resolve file /tmp/resolv.conf.auto \u3002","title":"\u914d\u7f6eUnbound"},{"location":"DNS/#tls-upstream","text":"\u7531\u4e8e\u786c\u4ef6\u6761\u4ef6\u9650\u5236\u548ctls-upstream\u8fde\u63a5\u5efa\u7acb\u901f\u5ea6\u6162\u7b49\u539f\u56e0\uff0cunbound\u7684\u89e3\u6790\u901f\u5ea6\u53ef\u80fd\u4f1a\u5f88\u6162\uff0c\u56e0\u6b64\u5b9e\u8df5\u4e2d\u4e0d\u63a8\u8350\u5b8c\u5168\u7531unbound\u89e3\u6790\uff0c\u800c\u662f\u5c06unbound\u4f5c\u4e3a\u6821\u56edDNS\u7684\u5907\u7528\u670d\u52a1\u4f7f\u7528\u3002 \u8981\u5b8c\u5168\u4ea4\u7531unbound\u89e3\u6790\uff0c\u5e94\u5f53\u4f7f\u7528\u975e\u52a0\u5bc6\u7684DNS\u534f\u8bae\u3002 \u73b0\u6709 1.1.1.1 \u548c \u7ea2\u9c7cDNS \u63d0\u4f9b\u7684DoT\u3002","title":"\u5173\u4e8etls-upstream"},{"location":"DNS/#googlehosts","text":"\u5df2\u505c\u7528\uff0c\u7531Unbound\u66ff\u4ee3\u3002 GoogleHosts\u9879\u76ee\u4e3b\u9875\uff1a https://github.com/googlehosts/ \u4f7f\u7528\u81ea\u5b9a\u4e49Host\u65f6\uff0c\u9700\u8981\u5728Luci /cgi-bin/luci/admin/network/dhcp \u4e2d\u6307\u660eAddtional host file\u3002 Host\u4e0b\u8f7d\u811a\u672c\uff1a #!/bin/sh wget -O /etc/googlehosts https://raw.githubusercontent.com/googlehosts/hosts/master/hosts-files/hosts wget -O /etc/googlehosts6 https://raw.githubusercontent.com/googlehosts/hosts-ipv6/master/hosts-files/hosts","title":"GoogleHosts"},{"location":"IPv6-NAT/","text":"IPv6 NAT \u00b6 \u53ea\u6709\u5728\u4e00\u4e9b\u7279\u6b8a\u7684\u573a\u666f\u4e0b\uff0c\u6bd4\u5982\u5728\u6821\u56ed\u7f51\u73af\u5883\u4e2d\uff0c\u624d\u9700\u8981IPv6 NAT\u3002\u901a\u8fc7\u4ee5\u4e0b\u6b65\u9aa4\u6765\u542f\u7528\uff1a opkg install ip6tables kmod-ipt-nat6 kmod-ip6tables kmod-ip6tables-extra luci-proto-ipv6 iputils-traceroute6 \u9996\u5148\u8981\u8bbe\u7f6eIPv6 Global ULA Prefix\u3002 \u53ef\u4ee5\u4f7f\u7528 ULA Generator \u83b7\u53d6\u4e00\u4e2a\u4ee5 fd \u5f00\u5934\u7684\u5730\u5740\uff0c\u5e76\u5c06\u5f00\u5934\u7684 fd \u6539\u4e3a dd \uff0c\u5373\u4fee\u6539\u4e3aRFC\u534f\u8bae\u4e2d\u89c4\u5b9a\u7684Reserved\u5730\u5740\u6bb5\u3002 \u5b9a\u4e49 /etc/hotplug.d/iface/90-ipv6 \uff0c\u4ee5\u4fbf\u5728IPv6\u7aef\u53e3\u4e0a\u7ebf\u65f6\u81ea\u52a8\u8bbe\u7f6e\u8def\u7531\u8868\uff1a #!/bin/sh [ \" $ACTION \" = ifup ] || exit 0 [ \" $INTERFACE \" = wan6 ] && { route -A inet6 add 2000 ::/3 gw $( route -A inet6 | grep ::/0 | grep eth0.2 | awk '{print $2}' ) dev $( uci -q get network.wan6.ifname ) } \u5e76\u5728Luci /cgi-bin/luci/admin/network/firewall/custom \u4e2d\u5b9a\u4e49\u9632\u706b\u5899\u89c4\u5219\uff1a # Set up IPv6 routing. WAN6 = eth0.2 LAN = br-lan ip6tables -t nat -A POSTROUTING -o $WAN6 -j MASQUERADE ip6tables -A FORWARD -m conntrack --ctstate RELATED,ESTABLISHED -j ACCEPT ip6tables -A FORWARD -i $LAN -j ACCEPT \u53c2\u8003\u94fe\u63a5\uff1a OpenWRT \u8def\u7531\u5668\u4f5c\u4e3a IPv6 \u7f51\u5173\u7684\u914d\u7f6e","title":"IPv6 NAT"},{"location":"IPv6-NAT/#ipv6-nat","text":"\u53ea\u6709\u5728\u4e00\u4e9b\u7279\u6b8a\u7684\u573a\u666f\u4e0b\uff0c\u6bd4\u5982\u5728\u6821\u56ed\u7f51\u73af\u5883\u4e2d\uff0c\u624d\u9700\u8981IPv6 NAT\u3002\u901a\u8fc7\u4ee5\u4e0b\u6b65\u9aa4\u6765\u542f\u7528\uff1a opkg install ip6tables kmod-ipt-nat6 kmod-ip6tables kmod-ip6tables-extra luci-proto-ipv6 iputils-traceroute6 \u9996\u5148\u8981\u8bbe\u7f6eIPv6 Global ULA Prefix\u3002 \u53ef\u4ee5\u4f7f\u7528 ULA Generator \u83b7\u53d6\u4e00\u4e2a\u4ee5 fd \u5f00\u5934\u7684\u5730\u5740\uff0c\u5e76\u5c06\u5f00\u5934\u7684 fd \u6539\u4e3a dd \uff0c\u5373\u4fee\u6539\u4e3aRFC\u534f\u8bae\u4e2d\u89c4\u5b9a\u7684Reserved\u5730\u5740\u6bb5\u3002 \u5b9a\u4e49 /etc/hotplug.d/iface/90-ipv6 \uff0c\u4ee5\u4fbf\u5728IPv6\u7aef\u53e3\u4e0a\u7ebf\u65f6\u81ea\u52a8\u8bbe\u7f6e\u8def\u7531\u8868\uff1a #!/bin/sh [ \" $ACTION \" = ifup ] || exit 0 [ \" $INTERFACE \" = wan6 ] && { route -A inet6 add 2000 ::/3 gw $( route -A inet6 | grep ::/0 | grep eth0.2 | awk '{print $2}' ) dev $( uci -q get network.wan6.ifname ) } \u5e76\u5728Luci /cgi-bin/luci/admin/network/firewall/custom \u4e2d\u5b9a\u4e49\u9632\u706b\u5899\u89c4\u5219\uff1a # Set up IPv6 routing. WAN6 = eth0.2 LAN = br-lan ip6tables -t nat -A POSTROUTING -o $WAN6 -j MASQUERADE ip6tables -A FORWARD -m conntrack --ctstate RELATED,ESTABLISHED -j ACCEPT ip6tables -A FORWARD -i $LAN -j ACCEPT \u53c2\u8003\u94fe\u63a5\uff1a OpenWRT \u8def\u7531\u5668\u4f5c\u4e3a IPv6 \u7f51\u5173\u7684\u914d\u7f6e","title":"IPv6 NAT"},{"location":"OpenVPN/","text":"OpenVPN \u00b6 \u5efa\u7acbDDNS \u00b6 \u963f\u91cc\u4e91DDNS \u914d\u7f6eOpenVPN \u00b6 \u53ef\u6309 OpenWRT OpenVPN\u914d\u7f6e\u8fdc\u7a0b\u8bbf\u95ee\u6240\u6709\u5bb6\u91cc\u5c40\u57df\u7f51\u670d\u52a1 \uff08 \u7f51\u9875\u5feb\u7167 \uff09\u4e0a\u7684\u6307\u5bfc\u8fdb\u884c\u3002","title":"OpenVPN"},{"location":"OpenVPN/#openvpn","text":"","title":"OpenVPN"},{"location":"OpenVPN/#ddns","text":"\u963f\u91cc\u4e91DDNS","title":"\u5efa\u7acbDDNS"},{"location":"OpenVPN/#openvpn_1","text":"\u53ef\u6309 OpenWRT OpenVPN\u914d\u7f6e\u8fdc\u7a0b\u8bbf\u95ee\u6240\u6709\u5bb6\u91cc\u5c40\u57df\u7f51\u670d\u52a1 \uff08 \u7f51\u9875\u5feb\u7167 \uff09\u4e0a\u7684\u6307\u5bfc\u8fdb\u884c\u3002","title":"\u914d\u7f6eOpenVPN"},{"location":"OpenWrt/","text":"OpenWrt\u64cd\u4f5c\u7cfb\u7edf \u00b6 \u5b89\u88c5\u7cfb\u7edf \u00b6 \u5728\u8def\u7531\u5668\u4e0a\u5237\u5165OpenWrt\u7684\u56fa\u4ef6\u5373\u53ef\u3002\u5728\u5237\u5165OpenWrt\u7684\u56fa\u4ef6\u4e4b\u524d\uff0c\u4e00\u822c\u9700\u8981\u786e\u8ba4\u8def\u7531\u5668\u7684u-boot\u6216Breed\u4fe1\u606f\uff0c\u4ee5\u514d\u5237\u673a\u8fc7\u7a0b\u4e2d\u51fa\u9519\u8bbe\u5907\u53d8\u7816\u65f6\u65e0\u6cd5\u6062\u590d\u3002 \u5b89\u88c5\u5b8c\u6210\u540e\u53ef\u4ee5\u901a\u8fc7SSH\u6765\u8bbf\u95eeShell\u6216HTTP\u6765\u8bbf\u95eeLuci\u3002 \u66f4\u65b0\u7cfb\u7edf \u00b6 \u7cfb\u7edf\u66f4\u65b0\u65f6\uff0c\u5bf9\u6587\u4ef6\u7cfb\u7edf\u505a\u51fa\u7684\u4fee\u6539\u5982\u65e0\u58f0\u660e\u5747\u4f1a\u88ab\u91cd\u7f6e\u3002 \u8981\u4fdd\u7559\u7684\u4fee\u6539\u9700\u8981\u5728Luci\u8bbe\u7f6e\u754c\u9762 /cgi-bin/luci/admin/system/flashops/backupfiles \u4e2d\u6307\u51fa\u3002 \u4e3aLuci\u7ba1\u7406\u754c\u9762\u5b89\u88c5SSL \u00b6 opkg install luci-ssl \u5728httpd\u4e0b\u4e00\u6b21\u542f\u52a8\u65f6\uff08 /etc/init.d/uhttpd restart \uff09\u4f1a\u81ea\u52a8\u751f\u6210SSL\u8bc1\u4e66\uff0c\u8be5\u8fc7\u7a0b\u53ef\u80fd\u8017\u65f61\u5206\u949f\u5de6\u53f3\u3002 \u5305\u7ba1\u7406\u5668opkg \u00b6 opkg update opkg list [ package-name ] opkg list-installed opkg install [ -d <path> ] <package-name> \u5e38\u7528\u8f6f\u4ef6 \u00b6 opkg install curl opkg install wget libustream-openssl ca-certificates opkg install unzip opkg install openssh-sftp-server \u5173\u4e8eOpenWrt\uff0c\u6709\u4ee5\u4e0b\u7684\u8d44\u6e90\u53ef\u4ee5\u53c2\u8003\uff1a OpenWrt\u5b98\u7f51 \u6069\u5c71\u65e0\u7ebf\u8bba\u575b Breed","title":"OpenWrt\u64cd\u4f5c\u7cfb\u7edf"},{"location":"OpenWrt/#openwrt","text":"","title":"OpenWrt\u64cd\u4f5c\u7cfb\u7edf"},{"location":"OpenWrt/#_1","text":"\u5728\u8def\u7531\u5668\u4e0a\u5237\u5165OpenWrt\u7684\u56fa\u4ef6\u5373\u53ef\u3002\u5728\u5237\u5165OpenWrt\u7684\u56fa\u4ef6\u4e4b\u524d\uff0c\u4e00\u822c\u9700\u8981\u786e\u8ba4\u8def\u7531\u5668\u7684u-boot\u6216Breed\u4fe1\u606f\uff0c\u4ee5\u514d\u5237\u673a\u8fc7\u7a0b\u4e2d\u51fa\u9519\u8bbe\u5907\u53d8\u7816\u65f6\u65e0\u6cd5\u6062\u590d\u3002 \u5b89\u88c5\u5b8c\u6210\u540e\u53ef\u4ee5\u901a\u8fc7SSH\u6765\u8bbf\u95eeShell\u6216HTTP\u6765\u8bbf\u95eeLuci\u3002","title":"\u5b89\u88c5\u7cfb\u7edf"},{"location":"OpenWrt/#_2","text":"\u7cfb\u7edf\u66f4\u65b0\u65f6\uff0c\u5bf9\u6587\u4ef6\u7cfb\u7edf\u505a\u51fa\u7684\u4fee\u6539\u5982\u65e0\u58f0\u660e\u5747\u4f1a\u88ab\u91cd\u7f6e\u3002 \u8981\u4fdd\u7559\u7684\u4fee\u6539\u9700\u8981\u5728Luci\u8bbe\u7f6e\u754c\u9762 /cgi-bin/luci/admin/system/flashops/backupfiles \u4e2d\u6307\u51fa\u3002","title":"\u66f4\u65b0\u7cfb\u7edf"},{"location":"OpenWrt/#lucissl","text":"opkg install luci-ssl \u5728httpd\u4e0b\u4e00\u6b21\u542f\u52a8\u65f6\uff08 /etc/init.d/uhttpd restart \uff09\u4f1a\u81ea\u52a8\u751f\u6210SSL\u8bc1\u4e66\uff0c\u8be5\u8fc7\u7a0b\u53ef\u80fd\u8017\u65f61\u5206\u949f\u5de6\u53f3\u3002","title":"\u4e3aLuci\u7ba1\u7406\u754c\u9762\u5b89\u88c5SSL"},{"location":"OpenWrt/#opkg","text":"opkg update opkg list [ package-name ] opkg list-installed opkg install [ -d <path> ] <package-name>","title":"\u5305\u7ba1\u7406\u5668opkg"},{"location":"OpenWrt/#_3","text":"opkg install curl opkg install wget libustream-openssl ca-certificates opkg install unzip opkg install openssh-sftp-server \u5173\u4e8eOpenWrt\uff0c\u6709\u4ee5\u4e0b\u7684\u8d44\u6e90\u53ef\u4ee5\u53c2\u8003\uff1a OpenWrt\u5b98\u7f51 \u6069\u5c71\u65e0\u7ebf\u8bba\u575b Breed","title":"\u5e38\u7528\u8f6f\u4ef6"},{"location":"USB/","text":"\u4f7f\u7528USB\u8bbe\u5907\u62d3\u5c55\u50a8\u5b58\u7a7a\u95f4 \u00b6 \u53ef\u4ee5\u4f7f\u7528USB\u8bbe\u5907\u6765\u62d3\u5c55\u8bbe\u5907\u7684\u5b58\u50a8\u7a7a\u95f4\u3002 reboot \u4e4b\u524d\u8bf7\u6ce8\u610f sync \u57fa\u672cUSB\u652f\u6301 \u00b6 # USB\u652f\u6301 opkg install kmod-usb-core opkg install kmod-usb-uhci kmod-usb-storage kmod-usb2 kmod-usb-ohci opkg install mount-utils opkg install block-mount # \u6302\u8f7d Luci\u754c\u9762 opkg install kmod-fs-ext4 # Ext4\u6587\u4ef6\u7cfb\u7edf opkg install kmod-fs-vfat # FAT\u6587\u4ef6\u7cfb\u7edf Swap\u548cext4\u5206\u533a \u00b6 \u4ee5\u4e00\u5757ext4\u548cswap\u5206\u533a\u4e3a\u4f8b\uff1a mkdir -p /mnt/sda1 mount -t ext4 /dev/sda1 /mnt/share -o rw,sync mkswap /dev/sda2 swapon /dev/sda2 \u5728U\u76d8\u4e0a\u5b89\u88c5opkg\u5305 \u00b6 \u5728Luci\u7ba1\u7406\u754c\u9762 /cgi-bin/luci/admin/system/packages/ipkg \u4e2d\uff0c\u4fee\u6539opkg\u8bbe\u7f6e\u5982\u4e0b\uff1a dest sda1 /mnt/usb/optware \u8bbe\u7f6ePath \u00b6 \u5bfc\u5165PATH\u7684\u65b9\u6cd5\u5982\u4e0b\uff1a /root/bin/env.sh # Assume a ext4 partition is mounted at /mnt/sda1 OPTWARE_PATH = /mnt/sda1/optware export PATH = $PATH : $OPTWARE_PATH /usr/bin/ export LD_LIBRARY_PATH = $LD_LIBRARY_PATH : $OPTWARE_PATH /usr/lib/ /etc/profile source /root/bin/env.sh \u5728U\u76d8\u4e0a\u5b89\u88c5\u8f6f\u4ef6 \u00b6 opkg install --dest sda1 <package-name> \u53c2\u8003\u94fe\u63a5\uff1a Adding a USB Device USB Storage Opkg","title":"\u4f7f\u7528USB\u8bbe\u5907\u62d3\u5c55\u50a8\u5b58\u7a7a\u95f4"},{"location":"USB/#usb","text":"\u53ef\u4ee5\u4f7f\u7528USB\u8bbe\u5907\u6765\u62d3\u5c55\u8bbe\u5907\u7684\u5b58\u50a8\u7a7a\u95f4\u3002 reboot \u4e4b\u524d\u8bf7\u6ce8\u610f sync","title":"\u4f7f\u7528USB\u8bbe\u5907\u62d3\u5c55\u50a8\u5b58\u7a7a\u95f4"},{"location":"USB/#usb_1","text":"# USB\u652f\u6301 opkg install kmod-usb-core opkg install kmod-usb-uhci kmod-usb-storage kmod-usb2 kmod-usb-ohci opkg install mount-utils opkg install block-mount # \u6302\u8f7d Luci\u754c\u9762 opkg install kmod-fs-ext4 # Ext4\u6587\u4ef6\u7cfb\u7edf opkg install kmod-fs-vfat # FAT\u6587\u4ef6\u7cfb\u7edf","title":"\u57fa\u672cUSB\u652f\u6301"},{"location":"USB/#swapext4","text":"\u4ee5\u4e00\u5757ext4\u548cswap\u5206\u533a\u4e3a\u4f8b\uff1a mkdir -p /mnt/sda1 mount -t ext4 /dev/sda1 /mnt/share -o rw,sync mkswap /dev/sda2 swapon /dev/sda2","title":"Swap\u548cext4\u5206\u533a"},{"location":"USB/#uopkg","text":"\u5728Luci\u7ba1\u7406\u754c\u9762 /cgi-bin/luci/admin/system/packages/ipkg \u4e2d\uff0c\u4fee\u6539opkg\u8bbe\u7f6e\u5982\u4e0b\uff1a dest sda1 /mnt/usb/optware","title":"\u5728U\u76d8\u4e0a\u5b89\u88c5opkg\u5305"},{"location":"USB/#path","text":"\u5bfc\u5165PATH\u7684\u65b9\u6cd5\u5982\u4e0b\uff1a /root/bin/env.sh # Assume a ext4 partition is mounted at /mnt/sda1 OPTWARE_PATH = /mnt/sda1/optware export PATH = $PATH : $OPTWARE_PATH /usr/bin/ export LD_LIBRARY_PATH = $LD_LIBRARY_PATH : $OPTWARE_PATH /usr/lib/ /etc/profile source /root/bin/env.sh","title":"\u8bbe\u7f6ePath"},{"location":"USB/#u","text":"opkg install --dest sda1 <package-name> \u53c2\u8003\u94fe\u63a5\uff1a Adding a USB Device USB Storage Opkg","title":"\u5728U\u76d8\u4e0a\u5b89\u88c5\u8f6f\u4ef6"},{"location":"campus-network/","text":"\u6821\u56ed\u7f51\u8ba4\u8bc1 \u00b6 \u4ee3\u7406\u5ba2\u6237\u7aefMiniEAP \u00b6 \u7f16\u8bd1\u548c\u5b89\u88c5 \u00b6 \u4f7f\u7528@ysc3839 fork\u51fa\u7684\u5e7f\u5dde\u5927\u5b66\u5206\u652f\uff1a https://github.com/ysc3839/openwrt-minieap/tree/gzhu \u914d\u7f6e \u00b6 \u4f7f\u7528 /etc/minieap.conf \u8fdb\u884c\u914d\u7f6e\u3002 \u72b6\u6001\u76d1\u6d4b\u811a\u672c \u00b6 /root/bin/ensure-minieap.sh #!/bin/sh # This script is uesd together with MiniEAP to achieve comfortable campus network experience. # It is recommanded to run this script as a minutely cron job. # When the script is exectued, it detects whether there is a MiniEAP instance running. # If no MiniEAP instance is running, the script launches one. If a MiniEAP instance is already # running, the script detects network connectivity. As long as network connectivity is good, # the script does nothing. Otherwise, the script terminates the running MiniEAP instance and # launch a new one. # `check_denpendency $1` exit the script if $1 is not found in the $PATH. check_dependency () { which $1 > /dev/null 2 > /dev/null if [ $? ! = 0 ] ; then echo \" $1 is required but not found in \\$PATH.\" exit 1 fi } # `detect_minieap` return 0 if MiniEAP is running. detect_minieap () { MINIEAP_PID = ` pgrep minieap ` if [ -z $MINIEAP_PID ] ; then echo \"MiniEAP is not running.\" return 1 else echo \"MiniEAP is running.\" return 0 fi } # `detect_network_connectivity` return 0 if network connectivity is good. detect_network_connectivity () { echo \"Testing network connectivity...\" curl https://www.baidu.com --max-time 30 > /dev/null 2 > /dev/null if [ $? ! = 0 ] ; then echo \"Network connectivity is poor.\" return 1 else echo \"Network connectivity is good.\" return 0 fi } kill_minieap () { killall minieap } start_minieap () { minieap & } restart_minieap () { kill_minieap sleep 3 start_minieap } check_dependency \"minieap\" check_dependency \"curl\" detect_minieap if [ $? == 0 ] ; then detect_network_connectivity if [ $? == 0 ] ; then echo \"MiniEAP is fine.\" else echo \"Restarting MiniEAP...\" restart_minieap fi else echo \"Starting MiniEAP...\" start_minieap fi exit 0 \u4e2d\u7ee7\u5ba2\u6237\u7aefAgentx1 \u00b6 \u5df2\u505c\u7528\uff0c\u4f7f\u7528MiniEAP\u66ff\u4ee3\u3002 https://bitbucket.org/CrazyBoyFeng/agentx1/","title":"\u6821\u56ed\u7f51\u8ba4\u8bc1"},{"location":"campus-network/#_1","text":"","title":"\u6821\u56ed\u7f51\u8ba4\u8bc1"},{"location":"campus-network/#minieap","text":"","title":"\u4ee3\u7406\u5ba2\u6237\u7aefMiniEAP"},{"location":"campus-network/#_2","text":"\u4f7f\u7528@ysc3839 fork\u51fa\u7684\u5e7f\u5dde\u5927\u5b66\u5206\u652f\uff1a https://github.com/ysc3839/openwrt-minieap/tree/gzhu","title":"\u7f16\u8bd1\u548c\u5b89\u88c5"},{"location":"campus-network/#_3","text":"\u4f7f\u7528 /etc/minieap.conf \u8fdb\u884c\u914d\u7f6e\u3002","title":"\u914d\u7f6e"},{"location":"campus-network/#_4","text":"/root/bin/ensure-minieap.sh #!/bin/sh # This script is uesd together with MiniEAP to achieve comfortable campus network experience. # It is recommanded to run this script as a minutely cron job. # When the script is exectued, it detects whether there is a MiniEAP instance running. # If no MiniEAP instance is running, the script launches one. If a MiniEAP instance is already # running, the script detects network connectivity. As long as network connectivity is good, # the script does nothing. Otherwise, the script terminates the running MiniEAP instance and # launch a new one. # `check_denpendency $1` exit the script if $1 is not found in the $PATH. check_dependency () { which $1 > /dev/null 2 > /dev/null if [ $? ! = 0 ] ; then echo \" $1 is required but not found in \\$PATH.\" exit 1 fi } # `detect_minieap` return 0 if MiniEAP is running. detect_minieap () { MINIEAP_PID = ` pgrep minieap ` if [ -z $MINIEAP_PID ] ; then echo \"MiniEAP is not running.\" return 1 else echo \"MiniEAP is running.\" return 0 fi } # `detect_network_connectivity` return 0 if network connectivity is good. detect_network_connectivity () { echo \"Testing network connectivity...\" curl https://www.baidu.com --max-time 30 > /dev/null 2 > /dev/null if [ $? ! = 0 ] ; then echo \"Network connectivity is poor.\" return 1 else echo \"Network connectivity is good.\" return 0 fi } kill_minieap () { killall minieap } start_minieap () { minieap & } restart_minieap () { kill_minieap sleep 3 start_minieap } check_dependency \"minieap\" check_dependency \"curl\" detect_minieap if [ $? == 0 ] ; then detect_network_connectivity if [ $? == 0 ] ; then echo \"MiniEAP is fine.\" else echo \"Restarting MiniEAP...\" restart_minieap fi else echo \"Starting MiniEAP...\" start_minieap fi exit 0","title":"\u72b6\u6001\u76d1\u6d4b\u811a\u672c"},{"location":"campus-network/#agentx1","text":"\u5df2\u505c\u7528\uff0c\u4f7f\u7528MiniEAP\u66ff\u4ee3\u3002 https://bitbucket.org/CrazyBoyFeng/agentx1/","title":"\u4e2d\u7ee7\u5ba2\u6237\u7aefAgentx1"}]}